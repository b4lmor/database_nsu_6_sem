# Отчёт о выполнении Задания 1

## Сущности

| №  | Имя таблицы            | Описание                            |                                             
|----|------------------------|-------------------------------------|
| 1  | trading_point_building | Здание торговой организации         |                                             
| 2  | employee               | Сотрудники                          |                                             
| 3  | trading_point          | Торговая точка (ТТ)                 |                                             
| 4  | department             | Секции универмагов                  |                                             
| 6  | product                | Товары                              |                                             
| 7  | product_supply         | Информация о поставках товаров      |                                             
| 8  | trading_point_product  | Товары, доступные в торговых точках |                                             
| 9  | sale                   | Продажи товаров                     |                                            
| 10 | client_info            | Информации о клиентах               |                                             
| 12 | vendor                 | Поставщики                          |                                             
| 13 | vendor_product         | Товары, доступные у поставщиков     |                                             
| 14 | product_order          | Заказы товаров у поставщика         |                                             
| 15 | product_order_details  | Уточнения заказов                   |

## Сущности и атрибуты

### `trading_point_building`

| Атрибут | Описание                                                         |
|---------|------------------------------------------------------------------|
| id      | Уникальный идентификатор (первичный ключ).                       |
| address | Адрес торговой точки (уникальный).                               |
| tp_type | Тип торговой точки (ENUM: DEPARTMENT_STORE, SHOP, KIOSK, STALL). |
| name    | Название торговой точки.                                         |

### `employee`

| Атрибут          | Описание                                                                                                        |
|------------------|-----------------------------------------------------------------------------------------------------------------|
| id               | Уникальный идентификатор (первичный ключ).                                                                      |
| manager_id       | Идентификатор менеджера (внешний ключ на employee).                                                             |
| job_title        | Должность сотрудника (ENUM: MANAGER, SALESMAN, CASHIER, WAREHOUSE_WORKER, ACCOUNTANT, SECURITY_GUARD, CLEANER). |
| tp_id            | Идентификатор торговой точки (внешний ключ на trading_point).                                                   |
| full_name        | Полное имя сотрудника.                                                                                          |
| birth_date       | Дата рождения сотрудника.                                                                                       |
| hire_date        | Дата приема на работу.                                                                                          |
| resignation_date | Дата увольнения (может быть NULL).                                                                              |

### `trading_point`

| Атрибут       | Описание                                                                      |
|---------------|-------------------------------------------------------------------------------|
| id            | Уникальный идентификатор (первичный ключ).                                    |
| tpb_id        | Идентификатор здания торговой точки (внешний ключ на trading_point_building). |
| manager_id    | Идентификатор менеджера (внешний ключ на employee).                           |
| name          | Название торговой точки.                                                      |
| rent_payment  | Арендная плата.                                                               |
| tp_size       | Размер торговой точки.                                                        |
| department_id | Идентификатор секции универмага.                                              |

### `department`

| Атрибут    | Описание                                                                      |
|------------|-------------------------------------------------------------------------------|
| id         | Уникальный идентификатор (первичный ключ).                                    |
| tpb_id     | Идентификатор здания торговой точки (внешний ключ на trading_point_building). |
| name       | Название департамента.                                                        |
| floor      | Этаж, на котором расположен департамент.                                      |
| manager_id | Идентификатор менеджера (внешний ключ на employee).                           |

### `product`

| Атрибут     | Описание                           |
|-------------|------------------------------------|
| article     | Артикул продукта (первичный ключ). |
| name        | Название продукта.                 |
| description | Описание продукта.                 |
| photo_url   | URL фотографии продукта.           |

### `product_supply`

| Атрибут         | Описание                                    |
|-----------------|---------------------------------------------|
| id              | Уникальный идентификатор (первичный ключ).  |
| product_article | Артикул продукта (внешний ключ на product). |
| delivery_date   | Дата поставки.                              |
| sell_date       | Дата продажи (может быть NULL).             |
| price           | Цена продукта.                              |

### `trading_point_product`

| Атрибут           | Описание                                                          |
|-------------------|-------------------------------------------------------------------|
| id                | Уникальный идентификатор (первичный ключ).                        |
| tp_id             | Идентификатор торговой точки (внешний ключ на trading_point).     |
| product_supply_id | Идентификатор поставки продукта (внешний ключ на product_supply). |

### `sale`

| Атрибут        | Описание                                                                         |
|----------------|----------------------------------------------------------------------------------|
| id             | Уникальный идентификатор (первичный ключ).                                       |
| tp_id          | Идентификатор торговой точки (внешний ключ на trading_point).                    |
| tpp_id         | Идентификатор продукта в торговой точке (внешний ключ на trading_point_product). |
| client_info_id | Идентификатор client_info                                                        |

### `client_info`

| Атрибут     | Описание                                       |
|-------------|------------------------------------------------|
| id          | Уникальный идентификатор (первичный ключ).     |
| full_name   | Полное имя клиента.                            |
| birth_date  | Дата рождения клиента.                         |
| height      | Рост клиента.                                  |
| weight      | Вес клиента.                                   |
| specificity | Специфика клиента (дополнительная информация). |

### `vendor`

| Атрибут | Описание                                   |
|---------|--------------------------------------------|
| id      | Уникальный идентификатор (первичный ключ). |
| name    | Название поставщика.                       |
| address | Адрес поставщика.                          |

### `vendor_product`

| Атрибут           | Описание                                                          |
|-------------------|-------------------------------------------------------------------|
| id                | Уникальный идентификатор (первичный ключ).                        |
| vendor_id         | Идентификатор поставщика (внешний ключ на vendor).                |
| product_supply_id | Идентификатор поставки продукта (внешний ключ на product_supply). |

### `product_order`

| Атрибут       | Описание                                                      |
|---------------|---------------------------------------------------------------|
| id            | Уникальный идентификатор (первичный ключ).                    |
| manager_id    | Идентификатор менеджера (внешний ключ на employee).           |
| vendor_id     | Идентификатор поставщика (внешний ключ на vendor).            |
| tp_id         | Идентификатор торговой точки (внешний ключ на trading_point). |
| order_status  | Статус заказа (ENUM: ORDERED, CONFIRMED, DELIVERED).          |
| create_date   | Дата создания заказа.                                         |
| confirm_date  | Дата подтверждения заказа (может быть NULL).                  |
| delivery_date | Дата доставки заказа (может быть NULL).                       |

### `product_order_details`

| Атрибут          | Описание                                                       |
|------------------|----------------------------------------------------------------|
| product_order_id | Идентификатор заказа продукта (внешний ключ на product_order). |
| product_id       | Артикул продукта (внешний ключ на product).                    |
| product_count    | Количество продукта в заказе.                                  |

## Сущности и связи

| №   | Связь | Описание                                                                          |
|-----|-------|-----------------------------------------------------------------------------------|
| R1  | 1:N   | Секция универмага может иметь несколько ТТ                                        |
| R2  | 1:N   | Универмаг может иметь несколько секций                                            |
| R3  | 1:N   | Один менеджер может руководить несколькими секциями                               |
| R4  | 1:N   | Один сотрудник может работать на разных должностях (**не одновременно**!)         |
| R5  | 1:N   | У одного здания может быть несколько ТТ (универмаг, магазин)                      |
| R6  | 1:N   | У одной ТТ может быть несколько сотрудников                                       |
| R7  | 1:1   | У ТТ может быть один менеджер, у одного менеджера может быть одна ТТ              |
| R8  | 1:N   | У ТТ может быть много продаж                                                      |
| R9  | 1:N   | У ТТ может быть много товаров                                                     |
| R10 | 1:N   | ТТ может создавать множество запросов на товары                                   |
| R11 | N:1   | Информация об одном клиенте может содержаться в нескольких покупках этого клиента |
| R12 | 1:N   | Одна продажа соотв. многим товарам (чек покупки)                                  |
| R13 | 1:N   | Одна информация о товаре соотв. одному товару                                     |
| R14 | 1:N   | Одна информация о товаре соотв. одному товару                                     |
| R15 | 1:N   | Производитель может иметь несколько товаров                                       |
| R16 | 1:N   | Одному продукту может соотв. несколько информаций о поставке/продаже              |
| R17 | 1:N   | Один менеджер может подтвердить несколько заказов                                 |
| R18 | 1:N   | Один поставщик может отправить несколько заказов                                  |
| R19 | 1:N   | Одному заказу может соотв. несколько деталей заказа                               |
| R20 | 1:N   | Одному товару может соотв. несколько деталей заказа                               |

## ER-диаграмма

![](assets/drawSQL-image-export-2025-04-17.jpg)

[Ссылка на интерактивную диаграмму](https://drawsql.app/teams/you-6/diagrams/er-diagram)
